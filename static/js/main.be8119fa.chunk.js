(this["webpackJsonproguelike-scratch"]=this["webpackJsonproguelike-scratch"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n.p+"static/media/rl_avatar.a75d3f2a.svg"},function(e,t,n){e.exports=n(32)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),l=(n(11),n(1)),i=n(2),s=80,u=7,m=25,d=function(e,t,n){if(s-e.y<u||s-e.x<u)return null;var a=m+1-u,r=Math.floor(Math.random()*a)+u,o=["down"].filter((function(e){return null!==e})),c={top:"down"===n?Math.floor(Math.random()*(r-4))+1:null,left:"right"===n?r*Math.floor(Math.random()*(r-4)+2):null,right:o.indexOf("right")>-1?r*Math.floor(Math.random()*(r-4)+2)-1:null,bottom:o.indexOf("down")>-1?Math.pow(r,2)-Math.floor(Math.random()*r):null},l=Object.fromEntries(Object.keys(c).filter((function(e){return null!==c[e]})).map((function(e){return[e,c[e]]}))),i=Array.from({length:Math.pow(r,2)},(function(e,n){var a=function(e){return e<=r?"top":e%r===0?"left":e%r===r-1?"right":e>=Math.pow(r,2)-r&&"bottom"}(n),o=l[a]===n,c=o?"portal":a?"wall":"none";return o?{tileType:c,toRoomIndex:t+("bottom"===a||"right"===a?1:-1)}:{tileType:c}}));return{id:0,type:"none",dimensionality:r,tiles:i,tunnelDirections:o,portalIndices:l}},y={turn:0,player:{roomCoords:{x:1,y:2,roomIndex:0},inventory:[{type:"weapon",baseTitle:"Spear",isEquipped:!0,damage:"1d4",key:1001,proximity:["melee","ranged"],equippedBy:"hand",range:"20ft",rangeMod:"1d4",description:"Old and scraggly, you picked this up from your dead father's corpse. He didn't seem to mind."},{type:"potion",key:1002,baseTitle:"Absolve Corruption I",proximity:"ranged",rangeMod:"1d4",equippedBy:"hand",description:"Smells a bit like old cheese mixed with your gym socks."}],baseStats:{strength:1,agility:1,constitution:1,perception:1,wisdom:1,intelligence:1,savingThrow:"1d8"},vitalStats:{hp:10,sp:0,xp:0},corruption:[{type:"",description:"",statMod:"perception",mod:-1}]},log:{messages:[{ctx:"general",value:"Started game."}]},location:{level:1,rooms:function(){return function e(t,n,a){var r=d(t,n,a);if(r){var o=r.tunnelDirections[Math.floor(Math.random()*r.tunnelDirections.length)],c={x:"right"===o?t.x+r.dimensionality:t.x,y:"down"===o?t.y+r.dimensionality:t.y};return[].concat(r).concat(e(c,n+1,o)).filter((function(e){return void 0!==e}))}}({x:4,y:4},0)}(),nearbyBeasts:[]}},p=function(e,t){return e.y*t+e.x},f=function(e,t){return{x:e%t,y:Math.floor(e/t)}},v=function(e){if(0===e)return 0;var t=e.indexOf("+")>-1,n=Number(e.split("")[0]),a=Number(t?e.split("d")[1].split("+")[0]:e.split("d")[1]),r=t?Number(e.split("+")[1]):0,o=Array.from({length:n},(function(e){return Math.ceil(Math.random()*a)})).reduce((function(e,t){return e+t}))+r;return o>0?o:0},g=Object(a.createContext)(),b=function(){var e=Object(a.useContext)(g);if(!e)throw new Error("must use within a ContextProvider");return e},h=function(e,t){e.turn+=1;var n=function(e,t){return Object.fromEntries(Object.keys(e).filter((function(e){return!t.test(e)})).map((function(t){return[t,e[t]]})))},a=n(e,/location/),r=function(t){if(!t)throw new Error("Must include msgs");if(Array.isArray(t))t.forEach((function(e){if(!e.ctx)throw new Error("You must provide context in ".concat(JSON.stringify(e)))}));else if(!t.ctx)throw new Error("You must provide context in ".concat(JSON.stringify(t)));var a=n(e,/log/),r=n(e.log,/messages/),o=Array.isArray(t)?t.map((function(t){var n=t.ctx,a=t.value;return{ctx:n,value:"".concat(e.turn," : ").concat(a)}})):{ctx:t.ctx,value:"".concat(e.turn," : ").concat(t.value)};return Object(i.a)({log:Object(i.a)({messages:e.log.messages.concat(o)},r)},a)};switch(t.type){case"printGameState":return e.turn-=1,console.log("print gameState",e),r({ctx:"console",value:"Printed gameState"});case"addLog":return r(t);case"clearRoom":var o=n(r({ctx:"console",value:"Cleared the room."}),/location/),c=n(e.location,/nearbyBeasts/);return Object(i.a)({location:Object(i.a)({nearbyBeasts:[]},c)},o);case"pushBeastToRoom":var l=n(r({ctx:"console",value:"Pushing ".concat(t.beast.baseTitle," to the room.")}),/location/),s=e.location,u=s.rooms[t.roomIndex],m=u.dimensionality,d=n(s,/(nearbyBeasts)/),y=u.tiles.map((function(e,t){return"none"===e.tileType?f(t,m):null})).filter((function(e){return"object"===typeof e&&e})),g=y[Math.floor(Math.random()*y.length)],b={x:g.x,y:g.y,roomIndex:t.roomIndex},h=Object.assign({},t.beast,{coords:b});return Object(i.a)({location:Object(i.a)({nearbyBeasts:s.nearbyBeasts.filter((function(e){return e.key!==t.beast.key})).concat(h)},d)},l);case"handleClickTile":e.turn-=1;var E=n(r({ctx:"roomHUD",value:"Clicked tile ".concat(t.index,".")}),/location/),x=n(e.location,/nearbyBeasts/);return Object(i.a)({location:Object(i.a)({nearbyBeasts:e.location.nearbyBeasts.map((function(e){return Object.assign({},e,{isTargeted:!1})}))},x)},E);case"openTargetBeast":e.turn-=1;var O=n(e.location,/targetState/);return Object(i.a)({location:Object(i.a)({targetState:!0},O)},a);case"handleTargetBeast":return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.beast;e.turn-=1;var o=a||t.targetBeast,c=n(e.location,/(nearbyBeasts|targetState)/),l=n(r({ctx:"room",value:"Targeting ".concat(o.baseTitle,".")}),/location/),s=Object.assign({},o,{isTargeted:!0});return Object(i.a)({location:Object(i.a)({targetState:!1,nearbyBeasts:e.location.nearbyBeasts.filter((function(e){return e.key!==o.key})).map((function(e){return Object.assign({},e,{isTargeted:!1})})).concat(s)},c)},l)}();case"handleMoveActor":var j=t.dir,k=e.location.rooms[e.player.roomCoords.roomIndex],w=k.dimensionality,C=e.player.roomCoords,N=C.x,M=C.y,T="left"===j?-1:"right"===j?1:0,S="up"===j?-1:"down"===j?1:0,B=p({x:N+T,y:M+S},w),R=k.tiles[B];if("wall"===R.tileType)return r({ctx:"room",value:"You kick the wall out of spite. Ow."});if("portal"===R.tileType){var I=N+T===w-1?"right":N+T===0?"left":M+S===w-1?"bottom":"top";return function(t,a,o){var c=e.location.rooms[t],l="right"===o?"left":"top"===o?"bottom":"left"===o?"right":"top",s=c.portalIndices[l],u=c.dimensionality,m=f(s,u),d=m.x,y=m.y,p=n(r({ctx:"room",value:"You open the portal."}),/player/),v=n(e.player,/roomCoords/);return Object(i.a)({player:Object(i.a)({roomCoords:{x:"right"===o?d+1:"left"===o?d-1:d,y:y,roomIndex:t}},v)},p)}(R.toRoomIndex,0,I)}var A=e.location.nearbyBeasts.map((function(e){var t=e.coords;return p(t,w)}));if(A.indexOf(B)>-1){var D=e.location.nearbyBeasts[A.indexOf(B)],H=e.player.inventory.filter((function(e){return"weapon"===e.type&&e.isEquipped}))[0],P=v(H?H.damage:"1d2+".concat(e.player.baseStats.strength)),Y=Object.assign({},D,{isTargeted:!0,hp:D.hp-P>=0?D.hp-P:0}),q=Y.hp>0?"You attack the ".concat(D.baseTitle).concat(H?" with a ".concat(H.baseTitle,"."):""):Y.dyingMessage,F=n(r({ctx:"room",value:q}),/location/),J=n(e.location,/nearbyBeasts/);return Object(i.a)({location:Object(i.a)({nearbyBeasts:e.location.nearbyBeasts.filter((function(e){return e.key!==Y.key})).concat(Y.hp>0?Y:[])},J)},F)}var L=n(e,/player/),G=n(e.player,/roomCoords/);return Object(i.a)({player:Object(i.a)({roomCoords:{x:N+T,y:M+S,roomIndex:e.player.roomCoords.roomIndex}},G)},L);case"adjustHP":if("npc"===t.targetActor){var _=e.location,U=_.nearbyBeasts,V=n(_,/nearbyBeasts/),W=U.filter((function(e){return e.isTargeted}))[0],$=e.player.inventory.filter((function(e){return"weapon"===e.type&&e.isEquipped}))[0],z=v($.damage),K=Object.assign({},W,{hp:W.hp-z>=0?W.hp-z:0}),Q=K.hp>0?"You attack the ".concat(K.baseTitle,"."):K.dyingMessage,X="Rolled ".concat($.damage," for ").concat(z," damage."),Z=n(r([{ctx:"room",value:Q},{ctx:"roller",value:X}]),/(location)/);return Object(i.a)({location:Object(i.a)({nearbyBeasts:U.filter((function(e){return!e.isTargeted})).concat(K.hp>0?K:[])},V)},Z)}var ee=n(e,/player/),te=n(e.player,/vitalStats/),ne=n(e.player.vitalStats,/hp/);return Object(i.a)({player:Object(i.a)({vitalStats:Object(i.a)({hp:e.player.vitalStats.hp+t.amt},ne)},te)},ee);case"handleToggleInventory":e.turn-=1;var ae=n(e,/focusMode/);return Object(i.a)({focusMode:"inventory"===e.focusMode?null:"inventory"},ae);case"handleClosePanel":e.turn-=1;var re=n(e,/focusMode/);return Object(i.a)({focusMode:null},re);case"toggleConsole":e.turn-=1;var oe=n(e,/focusMode/),ce="console"===e.focusMode?null:"console";return Object(i.a)({focusMode:ce},oe);case"applyAction":var le="You ".concat(t.itmAction.type," the ").concat(t.item.baseTitle).concat(t.target?" ".concat(t.target.verb," the ").concat(t.target.baseTitle):"","."),ie=n(r({ctx:"room",value:le}),/player/),se=n(e.player,/inventory/);return Object(i.a)({player:Object(i.a)({inventory:t.itmAction.doesRemove?e.player.inventory.filter((function(e){return e.key!==t.item.key})):e.player.inventory},se)},ie);default:throw new Error("Must include a valid action.type in action ".concat(JSON.stringify(t)))}},E=function(e){var t=Object(a.useReducer)(h,y),n=Object(l.a)(t,2),o=n[0],c=n[1],i=Object(a.useMemo)((function(){return[o,c]}),[o]);return r.a.createElement(g.Provider,Object.assign({value:i},e))},x=function(){var e=b(),t=Object(l.a)(e,2)[1];return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return t({ctx:"printBtn",type:"printGameState"})}},"Print GameState"))},O={"Cave Spider":{baseTitle:"Cave Spider",scarcity:"1d4-1",healthDie:"1d3+1",armorDie:0,savingThrowDie:"1d6",strength:"1d4",elementalScarcity:"2d6",imgSrc:"https://upload.wikimedia.org/wikipedia/commons/2/28/Araneus_diadematus_%28Spider_underside%29.jpg",dyingMessage:"You squish the spider. Then wish you hadn't."},"Cave Rat":{baseTitle:"Cave Rat",scarcity:"1d4-2",healthDie:"1d2+1",armorDie:0,savingThrowDie:0,strength:2,elementalScarcity:"3d6",imgSrc:"https://upload.wikimedia.org/wikipedia/commons/1/1d/Albino_Rat.jpg",dyingMessage:"You squish the rat. Then wish you hadn't."},"Un Beast":{baseTitle:"Un Beast",scarcity:"1d4-2",healthDie:"2d6+5",armorDie:5,savingThrowDie:0,strength:5,elementalScarcity:"1d4",imgSrc:"https://upload.wikimedia.org/wikipedia/commons/1/1d/Albino_Rat.jpg",dyingMessage:"You unmake the unbeast. Huh."}},j={fire:{scarcity:.8,healthMod:1},water:{scarcity:.8,healthMod:1},nether:{scarcity:.2,healthMod:5}},k=function(){return 100*Math.random()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["spider"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={elements:v("2d4+4")},a=t-1,r=e[Math.floor(Math.random()*e.length)],o=O[r],c=k(),l=v(o.healthDie)+a,i=l,s=v(o.elementalScarcity)+a>n.elements?j[Math.floor(Math.random()*j.length)]:null,u={hp:l,maxHp:i,key:c,elem:s};return Object.assign({},o,u)},C=(n(12),function(){var e=b(),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(a.useState)([]),d=Object(l.a)(m,2),y=d[0],p=d[1],f=function(){return w(y.length>0?y:Object.keys(O))},v=function(){var e=s||f();o({ctx:"console",type:"pushBeastToRoom",beast:e,roomIndex:n.player.roomCoords.roomIndex}),u(null)},g=Object.keys(O).map((function(e){return r.a.createElement(a.Fragment,{key:e},r.a.createElement("label",null,e),r.a.createElement("input",{type:"checkbox",value:y.indexOf()>-1,onClick:function(){return function(e){var t=-1===y.indexOf(e)?y.concat(e):y.filter((function(t){return t!==e}));p(t)}(e)}}))}));return r.a.createElement("div",{className:"beasterator"},r.a.createElement("div",{className:"console-component-title"},r.a.createElement("h3",null,"Beasterator")),r.a.createElement("div",{className:"beasterator-controls"},g),r.a.createElement("div",{className:"btn"},r.a.createElement("button",{onClick:function(){var e=f();o({ctx:"console",type:"addLog",value:"Generated a new ".concat(e.baseTitle)}),u(e)}},"Generate new beast"),r.a.createElement("button",{onClick:v},"Generate + push to Room")),r.a.createElement("div",{className:"beast-container"},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return v()}},"Push to Room"))))}),N=[4,6,8,10,12,16,20],M=function(){var e=b(),t=Object(l.a)(e,2)[1],n=Object(a.useState)(1),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)("d4"),u=Object(l.a)(s,2),m=u[0],d=u[1],y=Object(a.useState)(0),p=Object(l.a)(y,2),f=p[0],g=p[1],h=Object(a.useState)(0),E=Object(l.a)(h,2),x=E[0],O=E[1],j=N.map((function(e){var t="d".concat(e);return r.a.createElement("button",{key:e,onClick:function(){return function(e){return d(e)}(t)},className:"btn".concat(t===m?" active":"")},t)})),k="".concat(c).concat(m).concat(f>0?"+".concat(f):"");return r.a.createElement("div",{className:"roller"},r.a.createElement("div",{className:"console-component-title"},r.a.createElement("h3",null,"Roller")),r.a.createElement("div",{className:"button-die-number"},r.a.createElement("input",{onChange:function(e){var t=e.target;return i(t.value)},value:c})),r.a.createElement("div",{className:"button-group-dice"},j),r.a.createElement("div",{className:"modifiers"},"Set modifier",r.a.createElement("input",{type:"number",onChange:function(e){var t=e.target;return g(t.value)},value:f})),r.a.createElement("button",{onClick:function(){var e=v(k);t({ctx:"console",type:"addLog",value:"Rolling ".concat(k,"... Result: ").concat(e)}),O(e)},msg:"[Roller]: Rolled ".concat(k)},"Roll die"),x&&r.a.createElement("div",{className:"roll-value"},"Rolling ",k,"... ",x))},T=function(){var e=b(),t=Object(l.a)(e,2),n=t[0],a=t[1],o="locationator",c=n.location.nearbyBeasts;return r.a.createElement("div",{className:"locationator"},c.length>0&&r.a.createElement("button",{onClick:function(){a({ctx:o,type:"clearRoom"})}},"Clear Room"),c.filter((function(e){return e.isInBattle})).length>0&&r.a.createElement("button",{onClick:function(){a({ctx:o,type:"clearBattle"})}},"Clear Battle"))},S=(n(13),function(){var e=b(),t="console"===Object(l.a)(e,1)[0].focusMode;return r.a.createElement("div",{className:"console".concat(t?" active":"")},r.a.createElement(x,null),r.a.createElement(C,null),r.a.createElement(M,null),r.a.createElement(T,null))}),B=n(5),R=n.n(B),I=(n(14),function(){return r.a.createElement("div",{className:"player-display-avatar"},r.a.createElement("img",{src:R.a,alt:"player avatar"}))}),A=(n(15),function(){var e=b(),t=Object(l.a)(e,1)[0].player.vitalStats;return r.a.createElement("div",{className:"player-display-stats"},r.a.createElement("div",{className:"player-display-inner"},Object.keys(t).map((function(e){return r.a.createElement("div",{key:e},e,": ",t[e])}))))}),D=(n(16),function(){return r.a.createElement("div",{className:"player-display"},r.a.createElement(I,null),r.a.createElement(A,null))}),H=function(e){var t=e.messages;return r.a.createElement("div",{className:"log-body-inner-container"},t.map((function(e,t){return r.a.createElement("div",{key:e.value.concat(t)},r.a.createElement("span",null,e.value))})))},P=function(e){var t=e.messagesLength,n=e.activeViewIndex,a=e.handleAdjustViewIndex;return r.a.createElement("div",{className:"log-body-view-index-btns"},r.a.createElement("div",{className:"view-index-btns-container"},r.a.createElement("button",{className:"view-index-btn".concat(0===t||n===t-1?" disabled":""),onClick:function(){return a(1)}},"\u2191"),r.a.createElement("button",{className:"view-index-btn".concat(0===n?" disabled":""),onClick:function(){return a(-1)}},"\u2193")))},Y=function(e){var t=e.ctxFocus,n=e.displayTypes,a=e.handleFilterClick,o=n.map((function(e){return r.a.createElement("button",{className:"filter-btn".concat(t===e?" active":""),key:e,onClick:function(){return a(e)}},r.a.createElement("span",null,e))}));return r.a.createElement("div",{className:"log-filter-btns"},o)},q=(n(17),function(){var e=b(),t=Object(l.a)(e,1)[0],n=Object(a.useState)("general"),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(0),u=Object(l.a)(s,2),m=u[0],d=u[1],y=Object(a.useMemo)((function(){return t.log.messages.map((function(e){return e.ctx})).reduce((function(e,t){return e.indexOf(t)>-1?e:e.concat(",").concat(t)})).split(",")}),[t.log.messages]),p=t.log.messages,f="general"===c?p:p.filter((function(e){return e.ctx===c})),v=f.length-m,g=v>=11?v-11:0,h=f.slice(g,v);return r.a.createElement("div",{className:"log"},r.a.createElement("div",{className:"log-body panel",style:{padding:"0.25em"}},r.a.createElement(H,{messages:h}),r.a.createElement(P,{messagesLength:f.length,handleAdjustViewIndex:function(e){m+e<0||m+e>f.length-1||d(e?m+e:0)}})),r.a.createElement(Y,{ctxFocus:c,handleFilterClick:function(e){d(0),i(e)},displayTypes:y}))}),F=(n(18),function(){return r.a.createElement("div",{className:"heads-up-display"},r.a.createElement(D,null),r.a.createElement(q,null))}),J={type:"drop",doesRemove:!0},L={weapon:{allowedActions:[{type:"attack",doesRemove:!1},Object(i.a)({},{type:"throw",doesRemove:!0}),Object(i.a)({},J)]},potion:{allowedActions:[{type:"quaff",doesRemove:!0},Object(i.a)({},J)]}},G=(n(19),function(){var e=b(),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),s=i[0],u=i[1],m=n.player.inventory.map((function(e,t){return r.a.createElement("div",{key:e.baseTitle.concat(t),className:"inventory-item",onClick:function(){return u(e)}},e.baseTitle)})),d=s&&s.hasOwnProperty("key")&&n.player.inventory.filter((function(e){return e.key===s.key})).length>0;return r.a.createElement("div",{className:"inventory-controls"},m,d&&r.a.createElement("div",{className:"focus-item-container"},r.a.createElement("h5",null,"Use ",s.baseTitle),r.a.createElement("div",{className:"focus-item-action-list"},L[s.type].allowedActions.map((function(e){return r.a.createElement("button",{key:e.type,onClick:function(){return o({ctx:"inventory",type:"applyAction",item:s,itmAction:e})}},e.type)})))))}),_=(n(20),function(){var e=b(),t=Object(l.a)(e,1)[0];return r.a.createElement("div",{className:"controls-panel".concat("inventory"===t.focusMode?" active":"")},"inventory"===t.focusMode&&r.a.createElement(G,null))}),U=(n(21),/(baseTitle|scarcity|strength|hp|maxHp|elem|coords)/),V=function(){var e=b(),t=Object(l.a)(e,1)[0].location.nearbyBeasts.filter((function(e){return e.isTargeted}))[0];return r.a.createElement("div",{className:"target-heads-up-display"},t&&r.a.createElement("div",{className:"target-heads-up-display-inner-container"},Object.keys(t).filter((function(e){return U.test(e)})).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("b",null,e,":")," ",JSON.stringify(t[e]))}))))},W=(n(22),function(){var e=b(),t=Object(l.a)(e,1)[0],n=t.location.nearbyBeasts.filter((function(e){return e.coords.roomIndex===t.player.roomCoords.roomIndex})).length,a=t.log.messages.filter((function(e){return"roomHUD"===e.ctx})),o=a?a[a.length-1]:null;return r.a.createElement("div",{className:"action-heads-up-display panel"},r.a.createElement("div",null,r.a.createElement("div",null,"Beasts in room: ",n),r.a.createElement("div",null,o&&o.value)),r.a.createElement(V,null))}),$=function(e){var t=e.gridAreaStyle;return r.a.createElement("div",{className:"player",style:t})},z=function(e){var t=e.gridStyle,n=e.playerCoords,a={gridColumn:"".concat(n.x+1," / ").concat(n.x+1),gridRow:"".concat(n.y+1," / ").concat(n.y+1)};return r.a.createElement("div",{className:"room-grid player-grid",style:t},r.a.createElement($,{playerCoords:n,gridAreaStyle:a}))},K=(n(23),function(e){var t=e.currHealth,n=e.maxHealth,a={width:"".concat(t/n*100,"%")};return r.a.createElement("div",{className:"health-bar"},r.a.createElement("span",{style:a}))}),Q=function(e){var t=e.beast,n=e.gridAreaStyle,a=e.onClick;return r.a.createElement("div",{onClick:a,className:"beast ".concat(t.baseTitle.replace(/\s/g,"-").toLowerCase()).concat(t.isTargeted?" is-targeted":""),style:n},r.a.createElement(K,{currHealth:t.hp,maxHealth:t.maxHp}))},X=(n(24),function(e){var t=e.gridStyle,n=e.nearbyBeasts,a=e.onClick;return r.a.createElement("div",{className:"room-grid actor-grid",style:t},n.length>0&&n.map((function(e){var t={gridColumn:"".concat(e.coords.x+1," / ").concat(e.coords.x+1),gridRow:"".concat(e.coords.y+1," / ").concat(e.coords.y+1)},n={ctx:"BeastCell",type:"handleTargetBeast",beast:e};return r.a.createElement(Q,{key:"".concat(e.coords.x).concat(e.coords.y),onClick:function(){return a(n)},beast:e,gridAreaStyle:t})})))}),Z=function(e){var t=e.tileType,n=e.onClick;e.toRoomIndex;return r.a.createElement("div",{className:"map-tile ".concat(t),onClick:n})},ee=function(e){var t=e.tiles,n=e.gridStyle,o=e.handleClickTile,c=Object(a.useMemo)((function(){return t.map((function(e,t){var n=e.tileType,a=e.toRoomIndex;return r.a.createElement(Z,{key:t,tileType:n,onClick:function(){return o({ctx:"cell",type:"handleClickTile",index:t})},toRoomIndex:a})}))}),[t,o]);return r.a.createElement("div",{className:"room-grid tile-grid",style:n},c)},te=(n(25),function(e){var t=e.roomIndex,n=b(),o=Object(l.a)(n,2),c=o[0],i=o[1];Object(a.useEffect)((function(){var e=function(e){return i({ctx:"Room",type:e?"handleClosePanel":"handleToggleInventory"})},t=[37,38,39,40];window.addEventListener("keydown",(function(n){var a;n.isComposing||229===n.keyCode||(t.indexOf(n.keyCode)>-1&&(a=n.keyCode,i({ctx:"Room",type:"handleMoveActor",dir:function(){switch(a){case 37:return"left";case 38:return"up";case 39:return"right";case 40:return"down";default:throw new Error("Invalid keyCode supplied ".concat(JSON.stringify(a)))}}()})),73===n.keyCode&&e(),27===n.keyCode&&e(!0),67===n.keyCode&&i({ctx:"Room",type:"toggleConsole"}))}))}),[i]);var s=c.location.rooms[t],u=s.dimensionality,m=s.tiles,d=c.player.roomCoords,y=c.location.nearbyBeasts.filter((function(e){return e.coords.roomIndex===t})),p=i,f={gridTemplateColumns:"repeat(".concat(u,", ").concat("1em",")"),gridTemplateRows:"repeat(".concat(u,", ").concat("1em",")")},v=r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{gridStyle:f,playerCoords:d}),r.a.createElement(X,{gridStyle:f,nearbyBeasts:y,onClick:p}),r.a.createElement(ee,{gridStyle:f,tiles:m,roomIndex:t,handleClickTile:i})),g={width:"".concat(u,"em"),height:"".concat(u,"em")};return r.a.createElement("div",{className:"room",style:g},v)}),ne=(n(26),function(){var e=b(),t=Object(l.a)(e,1)[0].player.roomCoords.roomIndex,n=Object(a.useMemo)((function(){return r.a.createElement(te,{roomIndex:t})}),[t]);return r.a.createElement("div",{className:"action-display"},n)}),ae=(n(27),function(){var e=b(),t=Object(l.a)(e,1)[0],n=Object(a.useMemo)((function(){return t.location.rooms.map((function(e,n){var a=e.dimensionality,o=t.player.roomCoords.roomIndex===n,c={width:"".concat(a,"em"),height:"".concat(a,"em"),backgroundColor:o?"var(--red-dk-one)":"var(--red-dk-two)"};return r.a.createElement("span",{key:n,className:"map-room-tile",style:c})}))}),[t.player.roomCoords.roomIndex,t.location.rooms]);return r.a.createElement("div",{className:"map-display panel"},r.a.createElement("div",{className:"map-display-inner-container"},n))}),re=(n(28),function(){return r.a.createElement("div",{className:"game-display"},r.a.createElement(ne,null),r.a.createElement(W,null),r.a.createElement(ae,null))}),oe=(n(29),function(){return r.a.createElement("div",{className:"command-instruction-panel"},r.a.createElement("div",null,"c: toggle console"),r.a.createElement("div",null,"i: inventory"),r.a.createElement("div",null,"arrow keys: navigate"))}),ce=function(){return r.a.createElement("div",{className:"info-panel"},r.a.createElement("div",{className:"info-panel-inner panel"},r.a.createElement(oe,null)))},le=(n(30),function(){return r.a.createElement(E,null,r.a.createElement(S,null),r.a.createElement("div",{className:"game"},r.a.createElement(F,null),r.a.createElement(_,null),r.a.createElement(re,null),r.a.createElement(ce,null)))});n(31);var ie=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.be8119fa.chunk.js.map